{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{TextField,Button,Box,CircularProgress,Typography,IconButton}from'@mui/material';import{Image as ImageIcon,Close}from'@mui/icons-material';import{isValidGoogleDocsUrl}from'../utils/validation';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Custom hook for handling image URLs with fallbacks\nconst useImageWithFallback=url=>{const[imageUrl,setImageUrl]=useState('');const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(false);useEffect(()=>{if(!url){setImageUrl('');setError(null);return;}let isMounted=true;const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),10000);// 10 second timeout\nconst tryUrl=async function(testUrl){let isFallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!isMounted)return;try{setIsLoading(true);setError(null);// First, try a HEAD request to check if the URL is accessible\nconst response=await fetch(testUrl,{method:'HEAD',signal:controller.signal,mode:'no-cors'// This is just to check if the URL is reachable\n});// If we get here, the URL is accessible\nif(isMounted){setImageUrl(testUrl);setError(null);}}catch(err){if(!isMounted)return;if(!isFallback){// Try with a CORS proxy as fallback\nconst proxyUrl=`https://corsproxy.io/?${encodeURIComponent(testUrl)}`;await tryUrl(proxyUrl,true);}else{setError('Could not load image. The URL may be invalid or the server may be blocking access.');setImageUrl('');}}finally{if(isMounted){setIsLoading(false);}}};tryUrl(url);return()=>{isMounted=false;clearTimeout(timeoutId);controller.abort();};},[url]);return{imageUrl,error,isLoading};};const BlogForm=_ref=>{let{initialData,onSubmit,onCancel,loading=false}=_ref;const[formData,setFormData]=useState({title:'',googleDriveLink:'',image:null});const[imagePreview,setImagePreview]=useState('');const[errors,setErrors]=useState({});const fileInputRef=useRef(null);// Initialize form with initialData if provided\nuseEffect(()=>{if(initialData){setFormData({title:initialData.title||'',googleDriveLink:initialData.googleDriveLink||'',image:null});// If there's an existing image, show it as a preview\nif(initialData.image){if(typeof initialData.image==='string'){setImagePreview(initialData.image);}else if('data'in initialData.image){// Handle BlogImage object\nconst mimeType=initialData.image.contentType||'image/jpeg';setImagePreview(`data:${mimeType};base64,${initialData.image.data}`);}}}},[initialData]);// Handle file selection\nconst handleFileChange=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;// Check file type\nconst validTypes=['image/jpeg','image/png','image/gif','image/webp'];if(!validTypes.includes(file.type)){setErrors(prev=>({...prev,image:'Please select a valid image file (JPEG, PNG, GIF, or WebP)'}));return;}// Check file size (5MB max)\nif(file.size>5*1024*1024){setErrors(prev=>({...prev,image:'Image size should be less than 5MB'}));return;}// Create preview\nconst reader=new FileReader();reader.onloadend=()=>{const result=reader.result;setImagePreview(result);setFormData(prev=>({...prev,image:file}));};reader.readAsDataURL(file);// Clear any previous errors\nif(errors.image){setErrors(prev=>{const newErrors={...prev};delete newErrors.image;return newErrors;});}};const validateForm=()=>{const newErrors={};if(!formData.title.trim()){newErrors.title='Title is required';}if(!formData.googleDriveLink){newErrors.googleDriveLink='Google Drive link is required';}else if(!isValidGoogleDocsUrl(formData.googleDriveLink)){newErrors.googleDriveLink='Please enter a valid Google Docs URL';}// Image is optional, no validation needed beyond what's in handleFileChange\nsetErrors(newErrors);return Object.keys(newErrors).length===0;};const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));// Clear error for the field being edited\nif(errors[name]){setErrors(prev=>{const newErrors={...prev};delete newErrors[name];return newErrors;});}};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{const formDataToSubmit=new FormData();formDataToSubmit.append('title',formData.title);formDataToSubmit.append('googleDriveLink',formData.googleDriveLink);if(formData.image){formDataToSubmit.append('image',formData.image);}await onSubmit(formDataToSubmit);}catch(error){console.error('Error submitting form:',error);setErrors(prev=>({...prev,form:'Failed to submit form. Please try again.'}));}};return/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"title\",label:\"Blog Title\",name:\"title\",autoComplete:\"off\",autoFocus:true,value:formData.title,onChange:handleChange,error:!!errors.title,helperText:errors.title,disabled:loading}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"googleDriveLink\",label:\"Google Drive Document Link\",type:\"url\",id:\"googleDriveLink\",autoComplete:\"off\",value:formData.googleDriveLink,onChange:handleChange,error:!!errors.googleDriveLink,helperText:errors.googleDriveLink||'Make sure the document is shared with \"Anyone with the link\"',disabled:loading}),/*#__PURE__*/_jsxs(Box,{mt:2,mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Upload Blog Image (Optional)\"}),/*#__PURE__*/_jsxs(Box,{mb:3,children:[/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",component:\"label\",startIcon:/*#__PURE__*/_jsx(ImageIcon,{}),fullWidth:true,sx:{mb:2},children:[formData.image?'Change Image':'Select Image',/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\"image/*\",onChange:handleFileChange,ref:fileInputRef})]}),errors.image&&/*#__PURE__*/_jsx(Typography,{color:\"error\",variant:\"caption\",display:\"block\",sx:{mt:1,mb:1},children:errors.image}),imagePreview&&/*#__PURE__*/_jsxs(Box,{mt:2,textAlign:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",gutterBottom:true,children:\"Image Preview:\"}),/*#__PURE__*/_jsxs(Box,{sx:{position:'relative',maxWidth:'100%',margin:'0 auto',display:'inline-block'},children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",style:{maxWidth:'100%',maxHeight:'300px',borderRadius:'4px',border:'1px solid #ddd',objectFit:'contain'}}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>{setImagePreview('');setFormData(prev=>({...prev,image:null}));if(fileInputRef.current){fileInputRef.current.value='';}},sx:{position:'absolute',top:8,right:8,backgroundColor:'rgba(0, 0, 0, 0.5)',color:'white','&:hover':{backgroundColor:'rgba(0, 0, 0, 0.7)'}},children:/*#__PURE__*/_jsx(Close,{})})]})]})]})]}),/*#__PURE__*/_jsxs(Box,{mt:3,display:\"flex\",justifyContent:\"flex-end\",gap:2,children:[/*#__PURE__*/_jsx(Button,{onClick:onCancel,variant:\"outlined\",disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):null,children:initialData?'Update Post':'Create Post'})]})]});};export default BlogForm;","map":{"version":3,"names":["React","useState","useEffect","useRef","TextField","Button","Box","CircularProgress","Typography","IconButton","Image","ImageIcon","Close","isValidGoogleDocsUrl","jsx","_jsx","jsxs","_jsxs","useImageWithFallback","url","imageUrl","setImageUrl","error","setError","isLoading","setIsLoading","isMounted","controller","AbortController","timeoutId","setTimeout","abort","tryUrl","testUrl","isFallback","arguments","length","undefined","response","fetch","method","signal","mode","err","proxyUrl","encodeURIComponent","clearTimeout","BlogForm","_ref","initialData","onSubmit","onCancel","loading","formData","setFormData","title","googleDriveLink","image","imagePreview","setImagePreview","errors","setErrors","fileInputRef","mimeType","contentType","data","handleFileChange","e","_e$target$files","file","target","files","validTypes","includes","type","prev","size","reader","FileReader","onloadend","result","readAsDataURL","newErrors","validateForm","trim","Object","keys","handleChange","name","value","handleSubmit","preventDefault","formDataToSubmit","FormData","append","console","form","component","noValidate","sx","mt","children","margin","required","fullWidth","id","label","autoComplete","autoFocus","onChange","helperText","disabled","mb","variant","gutterBottom","startIcon","hidden","accept","ref","color","display","textAlign","position","maxWidth","src","alt","style","maxHeight","borderRadius","border","objectFit","onClick","current","top","right","backgroundColor","justifyContent","gap"],"sources":["D:/web dev/Ashu_web_blogs/frontend-new/src/components/BlogForm.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, ChangeEvent } from 'react';\nimport {\n  TextField,\n  Button,\n  Box,\n  CircularProgress,\n  Typography,\n  IconButton,\n} from '@mui/material';\nimport { Image as ImageIcon, Close } from '@mui/icons-material';\nimport { BlogFormData } from '../types';\nimport { isValidGoogleDocsUrl } from '../utils/validation';\n\ninterface BlogFormState {\n  title: string;\n  googleDriveLink: string;\n  image?: File | null;\n}\n\ninterface BlogFormProps {\n  initialData?: BlogFormData;\n  onSubmit: (data: FormData) => Promise<void> | void;\n  onCancel: () => void;\n  loading?: boolean;\n}\n\n// Custom hook for handling image URLs with fallbacks\nconst useImageWithFallback = (url: string) => {\n  const [imageUrl, setImageUrl] = useState<string>('');\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (!url) {\n      setImageUrl('');\n      setError(null);\n      return;\n    }\n\n    let isMounted = true;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n\n    const tryUrl = async (testUrl: string, isFallback = false) => {\n      if (!isMounted) return;\n      \n      try {\n        setIsLoading(true);\n        setError(null);\n        \n        // First, try a HEAD request to check if the URL is accessible\n        const response = await fetch(testUrl, {\n          method: 'HEAD',\n          signal: controller.signal,\n          mode: 'no-cors', // This is just to check if the URL is reachable\n        });\n\n        // If we get here, the URL is accessible\n        if (isMounted) {\n          setImageUrl(testUrl);\n          setError(null);\n        }\n      } catch (err) {\n        if (!isMounted) return;\n        \n        if (!isFallback) {\n          // Try with a CORS proxy as fallback\n          const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(testUrl)}`;\n          await tryUrl(proxyUrl, true);\n        } else {\n          setError('Could not load image. The URL may be invalid or the server may be blocking access.');\n          setImageUrl('');\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    tryUrl(url);\n\n    return () => {\n      isMounted = false;\n      clearTimeout(timeoutId);\n      controller.abort();\n    };\n  }, [url]);\n\n  return { imageUrl, error, isLoading };\n};\n\nconst BlogForm: React.FC<BlogFormProps> = ({\n  initialData,\n  onSubmit,\n  onCancel,\n  loading = false,\n}) => {\n  const [formData, setFormData] = useState<BlogFormState>({\n    title: '',\n    googleDriveLink: '',\n    image: null\n  });\n  const [imagePreview, setImagePreview] = useState<string>('');\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Initialize form with initialData if provided\n  useEffect(() => {\n    if (initialData) {\n      setFormData({\n        title: initialData.title || '',\n        googleDriveLink: initialData.googleDriveLink || '',\n        image: null\n      });\n      // If there's an existing image, show it as a preview\n      if (initialData.image) {\n        if (typeof initialData.image === 'string') {\n          setImagePreview(initialData.image);\n        } else if ('data' in initialData.image) {\n          // Handle BlogImage object\n          const mimeType = initialData.image.contentType || 'image/jpeg';\n          setImagePreview(`data:${mimeType};base64,${initialData.image.data}`);\n        }\n      }\n    }\n  }, [initialData]);\n\n  // Handle file selection\n  const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Check file type\n    const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n    if (!validTypes.includes(file.type)) {\n      setErrors(prev => ({\n        ...prev,\n        image: 'Please select a valid image file (JPEG, PNG, GIF, or WebP)'\n      }));\n      return;\n    }\n\n    // Check file size (5MB max)\n    if (file.size > 5 * 1024 * 1024) {\n      setErrors(prev => ({\n        ...prev,\n        image: 'Image size should be less than 5MB'\n      }));\n      return;\n    }\n\n    // Create preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const result = reader.result as string;\n      setImagePreview(result);\n      setFormData(prev => ({\n        ...prev,\n        image: file\n      }));\n    };\n    reader.readAsDataURL(file);\n    \n    // Clear any previous errors\n    if (errors.image) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors.image;\n        return newErrors;\n      });\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Title is required';\n    }\n    \n    if (!formData.googleDriveLink) {\n      newErrors.googleDriveLink = 'Google Drive link is required';\n    } else if (!isValidGoogleDocsUrl(formData.googleDriveLink)) {\n      newErrors.googleDriveLink = 'Please enter a valid Google Docs URL';\n    }\n    \n    // Image is optional, no validation needed beyond what's in handleFileChange\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error for the field being edited\n    if (errors[name as keyof typeof errors]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name as keyof typeof newErrors];\n        return newErrors;\n      });\n    }\n  };\n\n\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    try {\n      const formDataToSubmit = new FormData();\n      formDataToSubmit.append('title', formData.title);\n      formDataToSubmit.append('googleDriveLink', formData.googleDriveLink);\n      \n      if (formData.image) {\n        formDataToSubmit.append('image', formData.image);\n      }\n      \n      await onSubmit(formDataToSubmit);\n    } catch (error) {\n      console.error('Error submitting form:', error);\n      setErrors(prev => ({ \n        ...prev, \n        form: 'Failed to submit form. Please try again.' \n      }));\n    }\n  };\n\n  return (\n    <Box component=\"form\" onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\n      <TextField\n        margin=\"normal\"\n        required\n        fullWidth\n        id=\"title\"\n        label=\"Blog Title\"\n        name=\"title\"\n        autoComplete=\"off\"\n        autoFocus\n        value={formData.title}\n        onChange={handleChange}\n        error={!!errors.title}\n        helperText={errors.title}\n        disabled={loading}\n      />\n\n      <TextField\n        margin=\"normal\"\n        required\n        fullWidth\n        name=\"googleDriveLink\"\n        label=\"Google Drive Document Link\"\n        type=\"url\"\n        id=\"googleDriveLink\"\n        autoComplete=\"off\"\n        value={formData.googleDriveLink}\n        onChange={handleChange}\n        error={!!errors.googleDriveLink}\n        helperText={\n          errors.googleDriveLink ||\n          'Make sure the document is shared with \"Anyone with the link\"'\n        }\n        disabled={loading}\n      />\n\n      <Box mt={2} mb={2}>\n        <Typography variant=\"subtitle2\" gutterBottom>\n          Upload Blog Image (Optional)\n        </Typography>\n        <Box mb={3}>\n          <Button\n            variant=\"outlined\"\n            component=\"label\"\n            startIcon={<ImageIcon />}\n            fullWidth\n            sx={{ mb: 2 }}\n          >\n            {formData.image ? 'Change Image' : 'Select Image'}\n            <input\n              type=\"file\"\n              hidden\n              accept=\"image/*\"\n              onChange={handleFileChange}\n              ref={fileInputRef}\n            />\n          </Button>\n          \n          {errors.image && (\n            <Typography color=\"error\" variant=\"caption\" display=\"block\" sx={{ mt: 1, mb: 1 }}>\n              {errors.image}\n            </Typography>\n          )}\n          \n          {imagePreview && (\n            <Box mt={2} textAlign=\"center\">\n              <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                Image Preview:\n              </Typography>\n              <Box \n                sx={{\n                  position: 'relative',\n                  maxWidth: '100%',\n                  margin: '0 auto',\n                  display: 'inline-block'\n                }}\n              >\n                <img\n                  src={imagePreview}\n                  alt=\"Preview\"\n                  style={{\n                    maxWidth: '100%',\n                    maxHeight: '300px',\n                    borderRadius: '4px',\n                    border: '1px solid #ddd',\n                    objectFit: 'contain'\n                  }}\n                />\n                <IconButton\n                  size=\"small\"\n                  onClick={() => {\n                    setImagePreview('');\n                    setFormData(prev => ({ ...prev, image: null }));\n                    if (fileInputRef.current) {\n                      fileInputRef.current.value = '';\n                    }\n                  }}\n                  sx={{\n                    position: 'absolute',\n                    top: 8,\n                    right: 8,\n                    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n                    color: 'white',\n                    '&:hover': {\n                      backgroundColor: 'rgba(0, 0, 0, 0.7)'\n                    }\n                  }}\n                >\n                  <Close />\n                </IconButton>\n              </Box>\n            </Box>\n          )}\n        </Box>\n      </Box>\n\n      <Box mt={3} display=\"flex\" justifyContent=\"flex-end\" gap={2}>\n        <Button\n          onClick={onCancel}\n          variant=\"outlined\"\n          disabled={loading}\n        >\n          Cancel\n        </Button>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={loading}\n          startIcon={loading ? <CircularProgress size={20} /> : null}\n        >\n          {initialData ? 'Update Post' : 'Create Post'}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default BlogForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../api';import{Typography,CircularProgress,Box,Grid}from'@mui/material';import BlogCard from'../components/BlogCard';import{useAuth}from'../contexts/AuthContext';import BlogCarousel from'../components/BlogCarousel';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BlogsPage=()=>{const[blogs,setBlogs]=useState([]);const[loading,setLoading]=useState(true);// Error handling removed from public view\n// const [error, setError] = useState<string | null>(null);\nconst{user}=useAuth();const isAuthenticated=!!user;// Fetch blogs from API\nuseEffect(()=>{const fetchBlogs=async()=>{try{setLoading(true);const response=await api.get('/api/blogs');const blogsWithId=response.data.map(blog=>{let imageData='';if(blog.image){if(typeof blog.image==='string'){imageData=blog.image;}else if('data'in blog.image){imageData=`data:${blog.image.contentType||'image/jpeg'};base64,${blog.image.data}`;}}return{id:blog._id,title:blog.title,googleDriveLink:blog.googleDriveLink,image:imageData,createdAt:blog.createdAt,updatedAt:blog.updatedAt,author:blog.author};});setBlogs(blogsWithId);}catch(error){console.error('Error fetching blogs:',error);// Error handling removed from public view\n}finally{setLoading(false);}};fetchBlogs();},[]);// Simple view handler for blog posts\nconst handleViewBlog=blog=>{// You can implement a detail view here if needed\nconsole.log('Viewing blog:',blog.id);};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"60vh\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsx(Box,{sx:{p:3,maxWidth:'1400px',mx:'auto',width:'100%'},children:blogs.length===0?/*#__PURE__*/_jsx(Box,{textAlign:\"center\",py:4,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",children:\"No blog posts yet.\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{mb:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Featured Posts\"}),/*#__PURE__*/_jsx(BlogCarousel,{blogs:blogs.slice(0,5),onView:handleViewBlog,isAuthenticated:isAuthenticated})]}),/*#__PURE__*/_jsxs(Box,{mt:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Latest Posts\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,justifyContent:\"center\",children:blogs.map(blog=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,lg:3,sx:{display:'flex',minHeight:'400px'// Ensures consistent card height in the grid\n},children:/*#__PURE__*/_jsx(BlogCard,{blog:blog,onView:()=>handleViewBlog(blog),showContent:isAuthenticated,sx:{height:'100%'}})},blog.id))})]})]})});};export default BlogsPage;","map":{"version":3,"names":["React","useState","useEffect","api","Typography","CircularProgress","Box","Grid","BlogCard","useAuth","BlogCarousel","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BlogsPage","blogs","setBlogs","loading","setLoading","user","isAuthenticated","fetchBlogs","response","get","blogsWithId","data","map","blog","imageData","image","contentType","id","_id","title","googleDriveLink","createdAt","updatedAt","author","error","console","handleViewBlog","log","display","justifyContent","alignItems","minHeight","children","sx","p","maxWidth","mx","width","length","textAlign","py","variant","color","mb","gutterBottom","slice","onView","mt","container","spacing","item","xs","sm","md","lg","showContent","height"],"sources":["D:/web dev/Ashu_web_blogs/frontend-new/src/pages/BlogsPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../api';\nimport {\n  Typography,\n  CircularProgress,\n  Box,\n  Grid,\n} from '@mui/material';\nimport BlogCard from '../components/BlogCard';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Blog } from '../types';\nimport BlogCarousel from '../components/BlogCarousel';\n\ninterface BlogResponse {\n  _id: string;\n  title: string;\n  googleDriveLink: string;\n  image?: {\n    data: string;\n    contentType: string;\n    filename?: string;\n  } | string;\n  createdAt: string;\n  updatedAt?: string;\n  author?: {\n    id: string;\n    name: string;\n    email: string;\n  };\n}\n\nconst BlogsPage: React.FC = () => {\n  const [blogs, setBlogs] = useState<Blog[]>([]);\n  const [loading, setLoading] = useState(true);\n  // Error handling removed from public view\n  // const [error, setError] = useState<string | null>(null);\n  \n  const { user } = useAuth();\n  const isAuthenticated = !!user;\n\n  // Fetch blogs from API\n  useEffect(() => {\n    const fetchBlogs = async () => {\n      try {\n        setLoading(true);\n        const response = await api.get('/api/blogs');\n        const blogsWithId = response.data.map((blog: BlogResponse): Blog => {\n          let imageData = '';\n          \n          if (blog.image) {\n            if (typeof blog.image === 'string') {\n              imageData = blog.image;\n            } else if ('data' in blog.image) {\n              imageData = `data:${blog.image.contentType || 'image/jpeg'};base64,${blog.image.data}`;\n            }\n          }\n          \n          return {\n            id: blog._id,\n            title: blog.title,\n            googleDriveLink: blog.googleDriveLink,\n            image: imageData,\n            createdAt: blog.createdAt,\n            updatedAt: blog.updatedAt,\n            author: blog.author\n          };\n        });\n        \n        setBlogs(blogsWithId);\n      } catch (error) {\n        console.error('Error fetching blogs:', error);\n        // Error handling removed from public view\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBlogs();\n  }, []);\n\n  // Simple view handler for blog posts\n  const handleViewBlog = (blog: Blog) => {\n    // You can implement a detail view here if needed\n    console.log('Viewing blog:', blog.id);\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"60vh\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ \n      p: 3,\n      maxWidth: '1400px',\n      mx: 'auto',\n      width: '100%'\n    }}>\n      \n\n      {blogs.length === 0 ? (\n        <Box textAlign=\"center\" py={4}>\n          <Typography variant=\"h6\" color=\"textSecondary\">\n            No blog posts yet.\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          {/* Carousel Section */}\n          <Box mb={6}>\n            <Typography variant=\"h5\" gutterBottom>\n              Featured Posts\n            </Typography>\n            <BlogCarousel \n              blogs={blogs.slice(0, 5)}\n              onView={handleViewBlog}\n              isAuthenticated={isAuthenticated}\n            />\n          </Box>\n\n          {/* Grid Section */}\n          <Box mt={6}>\n            <Typography variant=\"h5\" gutterBottom>\n              Latest Posts\n            </Typography>\n            <Grid container spacing={3} justifyContent=\"center\">\n              {blogs.map((blog) => (\n                <Grid \n                  item \n                  xs={12} \n                  sm={6} \n                  md={4} \n                  lg={3} \n                  key={blog.id} \n                  sx={{ \n                    display: 'flex',\n                    minHeight: '400px' // Ensures consistent card height in the grid\n                  }}\n                >\n                  <BlogCard\n                    blog={blog}\n                    onView={() => handleViewBlog(blog)}\n                    showContent={isAuthenticated}\n                    sx={{ height: '100%' }}\n                  />\n                </Grid>\n              ))}\n            </Grid>\n          </Box>\n        </>\n      )}\n\n\n    </Box>\n  );\n};\n\nexport default BlogsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
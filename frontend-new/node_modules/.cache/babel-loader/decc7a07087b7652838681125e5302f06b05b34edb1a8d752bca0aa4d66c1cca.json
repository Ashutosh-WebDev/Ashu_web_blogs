{"ast":null,"code":"import api from '../api';\nexport const getBlogs = async () => {\n  try {\n    const response = await api.get('/api/blogs');\n    return response.data || [];\n  } catch (error) {\n    console.error('Error fetching blogs:', error);\n    throw error;\n  }\n};\nexport const getBlogById = async id => {\n  try {\n    const response = await api.get(`/api/blogs/${id}`);\n    if (!response.data.success) {\n      const error = new Error(response.data.message || 'Failed to fetch blog');\n      error.code = response.data.error;\n      throw error;\n    }\n    return response.data.data;\n  } catch (error) {\n    console.error(`Error fetching blog with id ${id}:`, error);\n\n    // Enhance the error with more context\n    if (error.response) {\n      var _error$response$data, _error$response$data2;\n      // The request was made and the server responded with a status code\n      // that falls out of the range of 2xx\n      const enhancedError = new Error(((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to fetch blog');\n      enhancedError.code = ((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.error) || 'UNKNOWN_ERROR';\n      enhancedError.status = error.response.status;\n      throw enhancedError;\n    } else if (error.request) {\n      // The request was made but no response was received\n      const enhancedError = new Error('No response received from server');\n      enhancedError.code = 'NO_RESPONSE';\n      throw enhancedError;\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      const enhancedError = new Error(error.message || 'Error setting up request');\n      enhancedError.code = error.code || 'REQUEST_ERROR';\n      throw enhancedError;\n    }\n  }\n};\nexport const createBlog = async blogData => {\n  try {\n    const formData = new FormData();\n\n    // Append all fields from blogData to formData\n    Object.entries(blogData).forEach(([key, value]) => {\n      if (key === 'image' && value instanceof File) {\n        formData.append('image', value);\n      } else if (value !== undefined && value !== null) {\n        formData.append(key, String(value));\n      }\n    });\n    const response = await api.post('/api/blogs', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error creating blog:', error);\n    throw error;\n  }\n};\nexport const updateBlog = async (id, blogData) => {\n  try {\n    // If blogData is already a FormData object, use it directly\n    const data = blogData instanceof FormData ? blogData : new FormData();\n\n    // If blogData is a plain object, convert it to FormData\n    if (!(blogData instanceof FormData)) {\n      Object.entries(blogData).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          if (key === 'image' && value instanceof FileList && value.length > 0) {\n            data.append('image', value[0]);\n          } else {\n            data.append(key, String(value));\n          }\n        }\n      });\n    }\n    const response = await api.put(`/api/blogs/${id}`, data, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(`Error updating blog with id ${id}:`, error);\n    throw error;\n  }\n};\nexport const deleteBlog = async id => {\n  try {\n    await api.delete(`/api/blogs/${id}`);\n  } catch (error) {\n    console.error(`Error deleting blog with id ${id}:`, error);\n    throw error;\n  }\n};","map":{"version":3,"names":["api","getBlogs","response","get","data","error","console","getBlogById","id","success","Error","message","code","_error$response$data","_error$response$data2","enhancedError","status","request","createBlog","blogData","formData","FormData","Object","entries","forEach","key","value","File","append","undefined","String","post","headers","updateBlog","FileList","length","put","deleteBlog","delete"],"sources":["D:/web dev/Ashu_blog/frontend-new/src/services/blogService.ts"],"sourcesContent":["import { Blog, BlogFormData } from '../types';\nimport api from '../api';\n\nexport const getBlogs = async (): Promise<Blog[]> => {\n  try {\n    const response = await api.get('/api/blogs');\n    return response.data || [];\n  } catch (error) {\n    console.error('Error fetching blogs:', error);\n    throw error;\n  }\n};\n\nexport const getBlogById = async (id: string): Promise<Blog> => {\n  try {\n    const response = await api.get(`/api/blogs/${id}`);\n    \n    if (!response.data.success) {\n      const error = new Error(response.data.message || 'Failed to fetch blog');\n      (error as any).code = response.data.error;\n      throw error;\n    }\n    \n    return response.data.data;\n  } catch (error) {\n    console.error(`Error fetching blog with id ${id}:`, error);\n    \n    // Enhance the error with more context\n    if (error.response) {\n      // The request was made and the server responded with a status code\n      // that falls out of the range of 2xx\n      const enhancedError = new Error(\n        error.response.data?.message || 'Failed to fetch blog'\n      );\n      (enhancedError as any).code = error.response.data?.error || 'UNKNOWN_ERROR';\n      (enhancedError as any).status = error.response.status;\n      throw enhancedError;\n    } else if (error.request) {\n      // The request was made but no response was received\n      const enhancedError = new Error('No response received from server');\n      (enhancedError as any).code = 'NO_RESPONSE';\n      throw enhancedError;\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      const enhancedError = new Error(error.message || 'Error setting up request');\n      (enhancedError as any).code = error.code || 'REQUEST_ERROR';\n      throw enhancedError;\n    }\n  }\n};\n\nexport const createBlog = async (blogData: BlogFormData): Promise<Blog> => {\n  try {\n    const formData = new FormData();\n    \n    // Append all fields from blogData to formData\n    Object.entries(blogData).forEach(([key, value]) => {\n      if (key === 'image' && value instanceof File) {\n        formData.append('image', value);\n      } else if (value !== undefined && value !== null) {\n        formData.append(key, String(value));\n      }\n    });\n    \n    const response = await api.post('/api/blogs', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error creating blog:', error);\n    throw error;\n  }\n};\n\nexport const updateBlog = async (id: string, blogData: Partial<BlogFormData> | FormData): Promise<Blog> => {\n  try {\n    // If blogData is already a FormData object, use it directly\n    const data = blogData instanceof FormData ? blogData : new FormData();\n    \n    // If blogData is a plain object, convert it to FormData\n    if (!(blogData instanceof FormData)) {\n      Object.entries(blogData).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          if (key === 'image' && value instanceof FileList && value.length > 0) {\n            data.append('image', value[0]);\n          } else {\n            data.append(key, String(value));\n          }\n        }\n      });\n    }\n    \n    const response = await api.put(`/api/blogs/${id}`, data, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(`Error updating blog with id ${id}:`, error);\n    throw error;\n  }\n};\n\nexport const deleteBlog = async (id: string): Promise<void> => {\n  try {\n    await api.delete(`/api/blogs/${id}`);\n  } catch (error) {\n    console.error(`Error deleting blog with id ${id}:`, error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}